
<div class='container'>
    <div class='headerfullwidth'>
        <h2 class="gold-pulse">Anime Club @ UCI</h2>
        <h2 class="gold-pulse" style='font-size-adjust: 0.4; font-style: italic'>(Cal Animage Epsilon)</h2>
        <!-- The border here -->
        <hr style='height: 50px; border-width: 5px; color: #F7EB5F; border-color: #F7EB5F; border-radius: 5px;' />
    </div>
    <div class='headercolumn'>
        <div class='headercolumn_item'>
            <h3 style='margin-bottom: 3%; color: #F7EB5F; font-weight: 700; font-size-adjust: 0.7;'>General Meetings</h3>
            <h3 style="color: #F7EB5F;" id="general-meeting-time">Wednesdays 7-10PM</h3>
            <h3 style="color: #F7EB5F;" id="general-meeting-location">SH 128</h3>
        </div>
        <div class='headercolumn_item'>
            <h3 style='margin-bottom: 3%; color: #F7EB5F; font-weight: 700; font-size-adjust: 0.7;'>Screening Squad</h3>
            <h3 style="color: #F7EB5F;" id="screening-meeting-time">Thursdays 7-10PM</h3>
            <h3 style="color: #F7EB5F;" id="screening-meeting-location">HH 112</h3>
        </div>
        <div class='headercolumn_disclaimer'>
            <h4>(Subject to change, see <a href="/discord">Discord</a> #meetings-info)</h4>
        </div>
    </div>
    <div class='headercolumntwo'>
        <img class="shokoimg" src="/assets/CAE_mascot2.png" style="height: 400px; padding-right: 2%;"></img>
    </div>
</div>
<style>
    @keyframes goldPulse {
        0%, 100% { color: #F7EB5F; text-shadow: 0 0 5px rgba(247, 235, 95, 0.5); }
        50% { color: #FFF9C2; text-shadow: 0 0 10px rgba(255, 249, 194, 0.8); }
    }
    
    .gold-pulse {
        animation: goldPulse 3s ease-in-out infinite;
        transition: all 0.3s ease;
    }
</style>

<script>
    async function fetchMeetingTimes() {
    try {
        const sheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRoJv2jOwAsTCFKhGp2Uut9zgrucw7yqF6Z62aCuSOJ8SWxDq_d-Pb6kxMmkvG8nIYyVcsLL8STDN-S/pubhtml'
        const response = await fetch(`https://api.allorigins.win/get?url=${encodeURIComponent(sheetUrl)}`);
        const data = await response.json();
        const csvData = data.contents;
        const rows = csvData.split('\n').slice(1);
        const meetings = {
            general: { time: 'To be updated!', location: '' },
            screening: { time: 'To be updated!', location: '' }
        };
        rows.reverse().forEach(row => {
            const [timestamp, meetingType, day, time, location] = row.split(',');
            if (meetingType && (meetingType.includes('General') || meetingType.includes('Both'))) {
                if (!meetings.general.updated && day && time) {
                    meetings.general.time = `${day} ${time}`;
                    meetings.general.location = location || '';
                    meetings.general.updated = true;
                }
            }
            if (meetingType && (meetingType.includes('Screening') || meetingType.includes('Both'))) {
                if (!meetings.screening.updated && day && time) {
                    meetings.screening.time = `${day} ${time}`;
                    meetings.screening.location = location || 'HH 112';
                    meetings.screening.updated = true;
                }
            }
            document.getElementById('general-meeting-time').textContent = meetings.general.time;
            document.getElementById('general-meeting-location').textContent = meetings.general.location;
            document.getElementById('screening-meeting-time').textContent = meetings.screening.time;
            document.getElementById('screening-meeting-location').textContent = meetings.screening.location;
        
        } catch (error) {
            console.error('Error loading meeting times:', error);
            document.getElementById('general-meeting-time').textContent = 'To be updated!';
            document.getElementById('general-meeting-location').textContent = '';
            document.getElementById('screening-meeting-time').textContent = 'To be updated!';
            document.getElementById('screening-meeting-location').textContent = '';
        });
document.addEventListener('DOMContentLoaded', fetchMeetingTimes);
setInterval(fetchMeetingTimes, 10000);
</script>
